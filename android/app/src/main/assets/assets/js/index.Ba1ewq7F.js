var e=Object.defineProperty,t=(t,r,n)=>((t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n)(t,"symbol"!=typeof r?r+"":r,n);!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const r={},n=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=e?.nonce||e?.getAttribute("nonce");i=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in r)return;r[e]=!0;const t=e.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${i}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,n&&s.setAttribute("nonce",n),document.head.appendChild(s),t?new Promise((t,r)=>{s.addEventListener("load",t),s.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return i.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})},i={minLevel:1,maxQueueSize:1e3,enableConsole:!0,enablePersistence:!1},s=class e{constructor(e,r={}){t(this,"logQueue",[]),t(this,"config"),this.context=e,this.config={...i,...r},this.debug=this.debug.bind(this),this.info=this.info.bind(this),this.warn=this.warn.bind(this),this.error=this.error.bind(this)}static getInstance(t,r){return e.instances.has(t)||e.instances.set(t,new e(t,r)),e.instances.get(t)}debug(e,t){this.log(0,e,t)}info(e,t){this.log(1,e,t)}warn(e,t){this.log(2,e,t)}error(e,t){const r=t instanceof Error?t.stack:void 0;this.log(3,e,t,r)}setLevel(e){this.config={...this.config,minLevel:e}}getLogs(){return Object.freeze([...this.logQueue])}clearLogs(){this.logQueue.length=0}log(e,t,r,n){if(e<this.config.minLevel)return;const i=Object.freeze({level:e,message:t,timestamp:Date.now(),context:this.context,data:this.sanitizeData(r),stackTrace:n});this.logQueue.length>=this.config.maxQueueSize&&this.logQueue.shift(),this.logQueue.push(i),this.config.enableConsole&&this.writeToConsole(i),this.config.enablePersistence&&this.persistLog(i).catch(e=>{})}writeToConsole(e){const t=`[${new Date(e.timestamp).toISOString()}] [${this.getLevelName(e.level)}] [${e.context}]`,r=this.getConsoleMethod(e.level);void 0!==e.data||void 0!==e.stackTrace?r(t,e.message,{data:e.data,stack:e.stackTrace}):r(t,e.message)}getConsoleMethod(e){switch(e){case 0:default:return console.log;case 1:return console.info;case 2:return console.warn;case 3:return console.error}}getLevelName(e){return["DEBUG","INFO","WARN","ERROR"][e]??"UNKNOWN"}sanitizeData(e){if(null==e)return e;try{const t=new WeakSet;return JSON.parse(JSON.stringify(e,(e,r)=>{if("object"==typeof r&&null!==r){if(t.has(r))return"[Circular Reference]";t.add(r)}return"string"==typeof r&&r.length>1e3?`${r.substring(0,1e3)}... [truncated]`:r instanceof Error?{name:r.name,message:r.message,stack:r.stack}:r instanceof ArrayBuffer?`[ArrayBuffer ${r.byteLength} bytes]`:r}))}catch(t){return`[Unsanitizable data: ${String(t)}]`}}async persistLog(e){return Promise.resolve()}};t(s,"instances",new Map);let o=s;function a(e){return o.getInstance(e)}o.getInstance("Global");var c=(e=>(e.INITIALIZATION_FAILED="INITIALIZATION_FAILED",e.CONFIGURATION_ERROR="CONFIGURATION_ERROR",e.STORAGE_ERROR="STORAGE_ERROR",e.NETWORK_ERROR="NETWORK_ERROR",e.PERMISSION_DENIED="PERMISSION_DENIED",e.RESOURCE_NOT_FOUND="RESOURCE_NOT_FOUND",e.INVALID_STATE="INVALID_STATE",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e))(c||{});class l extends Error{constructor(e,t,r,n=Date.now()){super(t),this.code=e,this.details=r,this.timestamp=n,this.name="AppError",Object.setPrototypeOf(this,l.prototype)}}const u=a("ErrorHandler"),d=class e{constructor(){t(this,"errorHistory",[]),t(this,"maxHistorySize",100),t(this,"circuits",new Map),t(this,"defaultRetryConfig",{maxAttempts:3,baseDelay:1e3,maxDelay:1e4,backoffMultiplier:2}),t(this,"defaultCircuitConfig",{failureThreshold:5,successThreshold:2,timeout:6e4}),this.setupGlobalErrorHandlers()}static getInstance(){return null===e.instance&&(e.instance=new e),e.instance}handleError(e,t={}){const r=this.processError(e,t);return u.error(r.message,{code:r.code,severity:r.severity,context:r.context,metadata:r.metadata}),this.addToHistory(r),!0===t.shouldReport&&this.reportError(r).catch(e=>{u.warn("Failed to report error",e)}),r}async withRetry(e,t={}){const r=t.maxRetries??this.defaultRetryConfig.maxAttempts,n=t.retryDelay??this.defaultRetryConfig.baseDelay;let i;for(let o=0;o<r;o++)try{const r=await e();return void 0!==t.context&&this.recordSuccess(t.context),r}catch(s){if(i=s,void 0!==t.context&&this.recordFailure(t.context),void 0!==t.context&&this.isCircuitOpen(t.context))throw new l(c.INVALID_STATE,`Circuit breaker open for ${t.context}`,{originalError:s});if(o===r-1)break;const e=Math.min(n*Math.pow(this.defaultRetryConfig.backoffMultiplier,o),this.defaultRetryConfig.maxDelay);u.warn(`Retry attempt ${o+1}/${r} after ${e}ms`,{context:t.context,error:this.extractErrorMessage(s)}),await this.sleep(e)}throw new l(c.UNKNOWN_ERROR,`Operation failed after ${r} attempts`,{lastError:i})}async withCircuitBreaker(e,t){if(this.isCircuitOpen(e))throw new l(c.INVALID_STATE,`Circuit breaker is open for ${e}`,{circuitName:e});try{const r=await t();return this.recordSuccess(e),r}catch(r){throw this.recordFailure(e),r}}getErrorHistory(e){const t=[...this.errorHistory].reverse();return Object.freeze(void 0!==e?t.slice(0,e):t)}clearHistory(){this.errorHistory.length=0}processError(e,t){const r=this.generateErrorId(),n=Date.now();return e instanceof l?{id:r,code:e.code,message:e.message,severity:t.severity??"MEDIUM",timestamp:n,context:t.context,stackTrace:e.stack,metadata:t.metadata,originalError:e}:e instanceof Error?{id:r,code:c.UNKNOWN_ERROR,message:e.message,severity:t.severity??"MEDIUM",timestamp:n,context:t.context,stackTrace:e.stack,metadata:t.metadata,originalError:e}:{id:r,code:c.UNKNOWN_ERROR,message:String(e),severity:t.severity??"LOW",timestamp:n,context:t.context,metadata:t.metadata,originalError:e}}addToHistory(e){this.errorHistory.length>=this.maxHistorySize&&this.errorHistory.shift(),this.errorHistory.push(e)}recordFailure(e){const t=this.getOrCreateCircuit(e);t.failures++,t.lastFailureTime=Date.now(),t.successes=0,t.failures>=this.defaultCircuitConfig.failureThreshold&&(t.state="OPEN",u.warn(`Circuit breaker opened for ${e}`,{failures:t.failures}))}recordSuccess(e){const t=this.getOrCreateCircuit(e);"HALF_OPEN"===t.state?(t.successes++,t.successes>=this.defaultCircuitConfig.successThreshold&&(t.state="CLOSED",t.failures=0,t.successes=0,u.info(`Circuit breaker closed for ${e}`))):"CLOSED"===t.state&&(t.failures=0)}isCircuitOpen(e){const t=this.circuits.get(e);return void 0!==t&&("OPEN"===t.state&&!(Date.now()-t.lastFailureTime>=this.defaultCircuitConfig.timeout&&(t.state="HALF_OPEN",u.info(`Circuit breaker half-open for ${e}`),1)))}getOrCreateCircuit(e){return this.circuits.has(e)||this.circuits.set(e,{state:"CLOSED",failures:0,successes:0,lastFailureTime:0}),this.circuits.get(e)}setupGlobalErrorHandlers(){window.addEventListener("unhandledrejection",e=>{e.preventDefault(),this.handleError(e.reason,{context:"UnhandledRejection",severity:"HIGH",shouldReport:!0})}),window.addEventListener("error",e=>{this.handleError(e.error??e.message,{context:"GlobalError",severity:"HIGH",shouldReport:!0})})}async reportError(e){return u.debug("Error reported",{errorId:e.id}),Promise.resolve()}extractErrorMessage(e){return e instanceof Error?e.message:String(e)}generateErrorId(){return`err_${Date.now()}_${Math.random().toString(36).substring(2,9)}`}sleep(e){return new Promise(t=>setTimeout(t,e))}};t(d,"instance",null);const h=d.getInstance(),m=a("PerformanceMonitor"),g={enabled:!0,sampleInterval:5e3,memoryThreshold:.85},p=class e{constructor(e={}){t(this,"config"),t(this,"metricsHistory",[]),t(this,"measurements",[]),t(this,"marks",new Map),t(this,"intervalId",null),this.config={...g,...e},this.config.enabled&&this.startMonitoring()}static getInstance(t){return null===e.instance&&(e.instance=new e(t)),e.instance}mark(e){this.config.enabled&&(this.marks.set(e,performance.now()),"function"==typeof performance.mark&&performance.mark(e))}measure(e,t,r){if(!this.config.enabled)return 0;const n=this.marks.get(t);if(void 0===n)throw new Error(`Performance mark "${t}" not found`);const i=void 0!==r?this.marks.get(r):performance.now();if(void 0===i)throw new Error(`Performance mark "${r}" not found`);const s=i-n,o={name:e,duration:s,startTime:n,endTime:i};return this.measurements.push(o),this.measurements.length>100&&this.measurements.shift(),m.debug(`Performance: ${e} took ${s.toFixed(2)}ms`),s}getMetrics(){return{timestamp:Date.now(),memory:this.getMemoryMetrics(),cpu:this.getCPUMetrics(),network:this.getNetworkMetrics()}}getMemoryMetrics(){const e=performance.memory;if(void 0===e)return{usedJSHeapSize:0,totalJSHeapSize:0,jsHeapSizeLimit:0,percentUsed:0};const t=e.jsHeapSizeLimit>0?e.usedJSHeapSize/e.jsHeapSizeLimit*100:0;return{usedJSHeapSize:e.usedJSHeapSize,totalJSHeapSize:e.totalJSHeapSize,jsHeapSizeLimit:e.jsHeapSizeLimit,percentUsed:t}}getCPUMetrics(){const e=performance.getEntriesByType("measure");if(0===e.length)return{usage:0,throttled:!1};const t=e.reduce((e,t)=>e+t.duration,0)/e.length,r=Math.min(t/16.67*100,100);return{usage:r,throttled:r>80}}getNetworkMetrics(){const e=navigator.connection;return{online:navigator.onLine,effectiveType:e?.effectiveType??"unknown",downlink:e?.downlink??0,rtt:e?.rtt??0}}getMeasurements(){return Object.freeze([...this.measurements])}getMeasurementsByName(e){return Object.freeze(this.measurements.filter(t=>t.name===e))}getAverageDuration(e){const t=this.getMeasurementsByName(e);return 0===t.length?0:t.reduce((e,t)=>e+t.duration,0)/t.length}clear(){this.marks.clear(),this.measurements.length=0,"function"==typeof performance.clearMarks&&performance.clearMarks(),"function"==typeof performance.clearMeasures&&performance.clearMeasures()}clearMark(e){this.marks.delete(e),"function"==typeof performance.clearMarks&&performance.clearMarks(e)}startMonitoring(){null===this.intervalId&&(this.captureMetrics(),this.intervalId=window.setInterval(()=>{this.captureMetrics()},this.config.sampleInterval),m.info("Performance monitoring started",{interval:this.config.sampleInterval}))}stopMonitoring(){null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null,m.info("Performance monitoring stopped"))}captureMetrics(){const e=this.getMetrics();this.metricsHistory.push(e),this.metricsHistory.length>720&&this.metricsHistory.shift(),this.checkThresholds(e)}checkThresholds(e){const t=e.memory.percentUsed/100;if(t>=this.config.memoryThreshold){const e={type:"memory",severity:t>=.95?"critical":"warning",value:100*t,threshold:100*this.config.memoryThreshold,timestamp:Date.now(),message:`Memory usage at ${(100*t).toFixed(1)}% (threshold: ${(100*this.config.memoryThreshold).toFixed(0)}%)`};this.triggerAlert(e)}if(e.cpu.usage>80){const t={type:"cpu",severity:e.cpu.usage>90?"critical":"warning",value:e.cpu.usage,threshold:80,timestamp:Date.now(),message:`CPU usage at ${e.cpu.usage.toFixed(1)}%`};this.triggerAlert(t)}}triggerAlert(e){m.warn(`Performance alert: ${e.message}`,{type:e.type,severity:e.severity,value:e.value,threshold:e.threshold}),void 0!==this.config.alertCallback&&this.config.alertCallback(e)}getMetricsHistory(e){const t=[...this.metricsHistory].reverse();return Object.freeze(void 0!==e?t.slice(0,e):t)}generateReport(){const e=this.getMetrics(),t=this.getMeasurements();let r="=== Performance Report ===\n\n";return r+="--- Memory ---\n",r+=`Used: ${(e.memory.usedJSHeapSize/1024/1024).toFixed(2)} MB\n`,r+=`Total: ${(e.memory.totalJSHeapSize/1024/1024).toFixed(2)} MB\n`,r+=`Limit: ${(e.memory.jsHeapSizeLimit/1024/1024).toFixed(2)} MB\n`,r+=`Usage: ${e.memory.percentUsed.toFixed(1)}%\n\n`,r+="--- CPU ---\n",r+=`Usage: ${e.cpu.usage.toFixed(1)}%\n`,r+=`Throttled: ${e.cpu.throttled?"Yes":"No"}\n\n`,r+="--- Network ---\n",r+=`Status: ${e.network.online?"Online":"Offline"}\n`,r+=`Type: ${e.network.effectiveType}\n`,r+=`Downlink: ${e.network.downlink} Mbps\n`,r+=`RTT: ${e.network.rtt} ms\n\n`,t.length>0&&(r+="--- Top 10 Slowest Operations ---\n",[...t].sort((e,t)=>t.duration-e.duration).slice(0,10).forEach((e,t)=>{r+=`${t+1}. ${e.name}: ${e.duration.toFixed(2)}ms\n`})),r}};t(p,"instance",null);const f=p.getInstance(),y=a("TTSService");class v{constructor(){t(this,"isInitialized",!1),t(this,"currentVoice",null),t(this,"audioContext",null)}async play(e,t={}){f.mark("tts-playback-start");try{null===this.audioContext&&(this.audioContext=new AudioContext),"suspended"===this.audioContext.state&&await this.audioContext.resume();const r=await this.audioContext.decodeAudioData(e.audioData.slice(0)),n=this.audioContext.createBufferSource();n.buffer=r,n.loop=t.loop??!1;const i=this.audioContext.createGain();return i.gain.value=t.volume??1,n.connect(i),i.connect(this.audioContext.destination),new Promise((e,r)=>{n.onended=()=>{n.disconnect(),i.disconnect(),void 0!==t.onEnd&&t.onEnd(),f.measure("tts-playback","tts-playback-start"),e()};try{n.start(0)}catch(s){(e=>{n.disconnect(),i.disconnect(),void 0!==t.onError&&t.onError(e),r(e)})(s instanceof Error?s:new Error(String(s)))}})}catch(r){const e=h.handleError(r,{context:"TTSService.play",severity:"MEDIUM"});throw new Error(e.message)}}stop(){null!==this.audioContext&&this.audioContext.close().then(()=>{this.audioContext=null})}async setVoice(e){if(void 0===(await this.getAvailableVoices()).find(t=>t.id===e))throw new Error(`Voice not found: ${e}`);this.currentVoice=e,y.info(`Voice changed to: ${e}`)}getCurrentVoice(){return this.currentVoice}validateOptions(e){if(0===e.text.trim().length)throw new Error("Text cannot be empty");if(e.text.length>5e3)throw new Error("Text too long (max 5000 characters)");return{text:e.text,voice:e.voice??this.currentVoice??"default",rate:this.clamp(e.rate??1,.5,2),pitch:this.clamp(e.pitch??1,.5,2),volume:this.clamp(e.volume??1,0,1),language:e.language??"ru-RU"}}clamp(e,t,r){return Math.max(t,Math.min(r,e))}generateRequestId(){return`tts_${Date.now()}_${Math.random().toString(36).substring(2,9)}`}ensureInitialized(){if(!this.isInitialized)throw new Error("TTS service not initialized. Call initialize() first.")}}const w=class e{static async getInstance(){return null===e.instance&&(e.instance=await e.createInstance()),e.instance}static async createInstance(){y.info("Creating TTS service instance...");try{const{ServerTTSService:e}=await n(async()=>{const{ServerTTSService:e}=await import("./ServerTTSService.BBvx-ADl.js");return{ServerTTSService:e}},[]),t=new e;return await t.initialize(),y.info("TTS service initialized: ServerTTSService"),t}catch(e){y.warn("ServerTTS unavailable, falling back to Mock",e);const{MockTTSService:t}=await n(async()=>{const{MockTTSService:e}=await import("./MockTTSService.Ds9f60Pb.js");return{MockTTSService:e}},[]),r=new t;return await r.initialize(),y.info("TTS service initialized: MockTTSService (fallback)"),r}}static reset(){null!==e.instance&&(e.instance.cleanup(),e.instance=null)}};t(w,"instance",null);let S=w;const E=a("NLPClient"),T=class e{constructor(){t(this,"config",{serverUrl:"http://192.168.0.104:5000",timeout:5e3,retryAttempts:1}),E.info("NLP Client initialized",{serverUrl:this.config.serverUrl})}static getInstance(){return null===e.instance&&(e.instance=new e),e.instance}async healthCheck(){f.mark("nlp-health-check-start");try{const e=await fetch(`${this.config.serverUrl}/health`,{method:"GET",signal:AbortSignal.timeout(this.config.timeout)});if(!e.ok)throw new Error(`Server returned ${e.status}`);const t=await e.json();return f.measure("nlp-health-check","nlp-health-check-start"),t}catch(e){throw E.error("Health check failed",e),e}}async buildSentence(e){f.mark("nlp-sentence-start");try{const t=await h.withRetry(async()=>{const t=await fetch(`${this.config.serverUrl}/api/sentence`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({words:e}),signal:AbortSignal.timeout(this.config.timeout)});if(!t.ok)throw new Error(`Server returned ${t.status}`);return t.json()},{maxRetries:this.config.retryAttempts,retryDelay:1e3,context:"NLPClient.buildSentence"});return f.measure("nlp-sentence","nlp-sentence-start"),E.info("Sentence built",{words:e.length,sentence:t.sentence}),t}catch(t){throw E.error("Failed to build sentence",t),t}}async generateSpeech(e){f.mark("nlp-speech-start");try{const t=await h.withRetry(async()=>{const t=await fetch(`${this.config.serverUrl}/api/speak`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({words:e}),signal:AbortSignal.timeout(3e4)});if(!t.ok)throw new Error(`Server returned ${t.status}`);return t.arrayBuffer()},{maxRetries:2,retryDelay:2e3,context:"NLPClient.generateSpeech"});return f.measure("nlp-speech","nlp-speech-start"),E.info("Speech generated",{words:e.length,audioSize:t.byteLength}),t}catch(t){throw E.error("Failed to generate speech",t),t}}setServerUrl(e){this.config.serverUrl=e,E.info("Server URL updated",{url:e})}};t(T,"instance",null);const x=T.getInstance(),b=a("TestTTS");async function k(){const e=document.getElementById("app");if(!e)return;e.innerHTML='\n    <div style="padding: 20px; font-family: Arial; max-width: 600px;">\n      <h1>🎤 TTS Тест</h1>\n      \n      <div style="margin: 20px 0;">\n        <label>IP сервера:</label><br>\n        <input type="text" id="serverUrl" value="http://192.168.0.104:5000" style="width: 100%; padding: 8px;">\n        <button id="setServer" style="margin-top: 5px; padding: 8px 16px;">Установить</button>\n        <button id="testServer" style="margin-top: 5px; padding: 8px 16px; background: #4CAF50; color: white; border: none;">Тест сервера</button>\n      </div>\n      \n      <div style="margin: 20px 0;">\n        <label>Введи слова (через пробел):</label><br>\n        <input type="text" id="wordsInput" value="Я обниматься мама папа" style="width: 100%; padding: 8px;">\n      </div>\n      \n      <button id="speakBtn" style="padding: 10px 20px; font-size: 16px; background: #2196F3; color: white; border: none; cursor: pointer;">\n        🔊 Озвучить\n      </button>\n      \n      <div id="status" style="margin-top: 20px; padding: 10px; background: #f0f0f0; border-radius: 4px; white-space: pre-wrap; font-family: monospace; font-size: 12px; max-height: 400px; overflow-y: auto;">\n        Готов к работе\n      </div>\n      \n      <div id="logs" style="margin-top: 20px; padding: 10px; background: #263238; color: #aed581; border-radius: 4px; white-space: pre-wrap; font-family: monospace; font-size: 11px; max-height: 300px; overflow-y: auto;">\n        === ЛОГИ ===\n      </div>\n    </div>\n  ';const t=document.getElementById("serverUrl"),r=document.getElementById("setServer"),n=document.getElementById("testServer"),i=document.getElementById("wordsInput"),s=document.getElementById("speakBtn"),o=document.getElementById("status"),a=document.getElementById("logs");function c(e){const t=(new Date).toLocaleTimeString();a&&(a.textContent+=`\n[${t}] ${e}`,a.scrollTop=a.scrollHeight)}function l(e,t=!1){o&&(o.textContent=e,o.style.background=t?"#ffebee":"#e8f5e9"),c(e)}window.addEventListener("error",e=>{c(`🔴 GLOBAL ERROR: ${e.message} at ${e.filename}:${e.lineno}`)}),window.addEventListener("unhandledrejection",e=>{c(`🔴 UNHANDLED REJECTION: ${e.reason}`)}),r?.addEventListener("click",()=>{const e=t.value.trim();x.setServerUrl(e),l(`Сервер установлен: ${e}`)}),n?.addEventListener("click",async()=>{const e=t.value.trim();c(`🔍 Тестирую подключение к ${e}...`);try{l("Проверка /health...");const t=await fetch(`${e}/health`,{method:"GET",signal:AbortSignal.timeout(5e3)});if(c(`📡 Статус ответа: ${t.status} ${t.statusText}`),!t.ok)return void l(`❌ Сервер вернул ${t.status}`,!0);const r=await t.json();c(`✅ Ответ сервера: ${JSON.stringify(r,null,2)}`),l(`✅ Сервер работает! Model: ${r.model||"unknown"}`)}catch(r){const e=r instanceof Error?r:new Error(String(r));c(`❌ Ошибка подключения: ${e.name} - ${e.message}`),c(`Stack: ${e.stack}`),l(`❌ Не могу подключиться: ${e.message}`,!0)}}),s?.addEventListener("click",async()=>{try{c("🎤 Начинаю озвучивание..."),l("Инициализация TTS..."),c("📦 Создаю TTS сервис...");const e=await S.getInstance();c("✅ TTS сервис создан");const t=i.value.trim(),r=t.split(/\s+/).filter(e=>e.length>0);c(`📝 Слова для озвучки: ${r.join(", ")}`),l(`Генерация речи для: ${r.join(", ")}...`),c("🔊 Синтезирую речь...");const n=await e.synthesize({text:t});c(`✅ Речь синтезирована. Размер: ${n.audioData.byteLength} bytes`),l("Воспроизведение..."),await e.play(n,{onEnd:()=>{c("✅ Воспроизведение завершено"),l("✅ Готово!")},onError:e=>{c(`❌ Ошибка воспроизведения: ${e.message}`),l(`❌ Ошибка: ${e.message}`,!0)}})}catch(e){const t=e instanceof Error?e:new Error(String(e));b.error("Test failed",t),c(`❌ КРИТИЧЕСКАЯ ОШИБКА: ${t.name} - ${t.message}`),c(`Stack: ${t.stack}`),l(`❌ Ошибка: ${t.message}`,!0)}}),c("🚀 Приложение запущено"),c(`📱 UserAgent: ${navigator.userAgent}`),c(`🌐 URL: ${window.location.href}`),c("🔌 Сервер по умолчанию: http://192.168.0.104:5000")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{k()}):k();export{v as T,a as c,x as n,f as p};
